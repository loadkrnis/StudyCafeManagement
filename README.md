# StudyCafeManagement  
  
## 프로젝트 소개
본 프로젝트는 스터디카페를 운영하는 프랜차이즈 회사에서 여러 가맹점에게 배포할 수 있는 프로그램입니다. 
해당 프로그램은 **.NET 프레임워크의 플랫폼 독립적 장점**을 살려 감압식 터치스크린을 이용한 무인 키오스크에 프로그램을 설치 후 사용하게 됩니다. 
프로그램은 스터디카페 사용자가 사용할 수 있는 UI가 있고, 카페를 운영하고 있는 점주가 사용할 수 있는 UI로 나뉘어져 있습니다. 
본 프로그램을 이용하여 고객은 무인 키오스크를 이용해 스터디카페 좌석을 골라서 이용할 수 있고, 점주는 가격 설정 및 매출 조회를 할 수 있습니다.

<br/>  

## 시스템 기능도
<img width="939" alt="스크린샷 2021-01-04 오후 4 51 31" src="https://user-images.githubusercontent.com/45731301/103513025-214dfd00-4ead-11eb-92f1-07fb35b8d36b.png">
<br/>  

## 사용자 요구 분석
![image02](https://user-images.githubusercontent.com/45731301/103510960-7daf1d80-4ea9-11eb-8942-00d16a2ca42b.png)
![image03](https://user-images.githubusercontent.com/45731301/103510962-7e47b400-4ea9-11eb-96ee-531d9eb99819.png)

<br/>  

## 데이터베이스 ERD (Oracle 11g)
<img width="1525" alt="스크린샷 2021-01-04 오후 4 45 21" src="https://user-images.githubusercontent.com/45731301/103512587-53ab2a80-4eac-11eb-8638-6cb0ba5e220a.png">

<br/>  

## 주요 기능
### 로그인 (AdminLogin.cs)
![image20](https://user-images.githubusercontent.com/45731301/103516939-ae488480-4eb4-11eb-8dd1-f2017cbfb227.png)<br/>
지점의 아이디와 비밀번호로 로그인할 수 있습니다. 
하단의 관리자 모드를 체크하고 로그인시 점주를 위한 **관리자 모드**가 실행됩니다. 체크를 해제하고 로그인시 고객이 사용하게 될 키오스크 메인 화면이 실행됩니다.

<br/>  

### 관리자 모드
#### 정보 관리
![image21](https://user-images.githubusercontent.com/45731301/103517591-bd7c0200-4eb5-11eb-94db-9513e8ed85b6.png)<br>
점주가 로그인한 아이디와 비밀번호를 변경할 수 있고 지점 정보 및 요금제도 변경할 수 있습니다. 

<br/>  

#### 좌석 위치 변경
![image22](https://user-images.githubusercontent.com/45731301/103517651-d684b300-4eb5-11eb-9737-7dc9bf227b5f.png)
지점마다 좌석의 위치가 다를 수 있기 때문에 점주가 직접 마우스로 좌석의 위치를 Drag&Drop으로 변경하고 생성할 수 있습니다. 
**(우측 ListView의 ContextMenu(마우스 오른쪽버튼)를 사용해 좌석의 추가/삭제가 가능)**

<br/>  

#### 매출 조회
<img width="882" alt="스크린샷 2021-01-04 오후 6 11 51" src="https://user-images.githubusercontent.com/45731301/103519137-5875db80-4eb8-11eb-8bea-3655de66272d.png">
날짜를 선택하면 우측에는 해당 날짜에 방문자와 퇴실시간을 조회할 수 있고 하단에는 해당 날짜의 총 매출금액을 알 수 있습니다. 

<br/>  

### 키오스크 모드
<img width="780" alt="스크린샷 2021-01-04 오후 6 13 32" src="https://user-images.githubusercontent.com/45731301/103519247-8f4bf180-4eb8-11eb-8566-c8d99cd509df.png">
<img width="606" alt="스크린샷 2021-01-04 오후 6 15 10" src="https://user-images.githubusercontent.com/45731301/103519400-cc17e880-4eb8-11eb-956a-8e5e41204a45.png">
<img width="619" alt="스크린샷 2021-01-04 오후 6 16 07" src="https://user-images.githubusercontent.com/45731301/103519475-eeaa0180-4eb8-11eb-8514-ef5beb98efae.png">
<img width="631" alt="스크린샷 2021-01-04 오후 6 17 14" src="https://user-images.githubusercontent.com/45731301/103519567-1731fb80-4eb9-11eb-9fd3-b09355ab9af9.png">
로그인 후 총 좌석과 잔여 좌석이 나오고 무슨 지점을 이용중인이 우측 상단에 표시 됩니다. 이용권 버튼을 눌렀을 때에는 금액을 선택할 수 있습니다. 
하단의 번호 입력란에 번호를 기입 후 자리이동 버튼을 클릭 시 이용중인 고객이라면 자리를 변경할 수 있습니다. 
퇴실하기 버튼도 하단의 번호를 입력 후 퇴실하면 퇴실처리가 됩니다. 
“입장하기/정기권사용” 버튼은 이미 이용중인 고객을 위해 영수증을 재발행 하게 됩니다. 
좌석선택시 이미 사용중인 좌석은 회색으로 표시되고 선택도 불가능하게 됩니다.

<br/>  

### 고객 로그인
<img width="614" alt="스크린샷 2021-01-04 오후 6 19 27" src="https://user-images.githubusercontent.com/45731301/103519737-6546ff00-4eb9-11eb-8712-8154e74be95a.png">
<img width="625" alt="스크린샷 2021-01-04 오후 6 21 41" src="https://user-images.githubusercontent.com/45731301/103520042-e0101a00-4eb9-11eb-85ab-850575097820.png">
<img width="579" alt="스크린샷 2021-01-04 오후 6 20 51" src="https://user-images.githubusercontent.com/45731301/103519881-a0e1c900-4eb9-11eb-8dd5-c9f4e07a0071.png">

<br>

고객의 로그인 처리는 고객의 사용성을 위해 따로 회원가입 과정 없이 휴대폰 번호를 PirmaryKey 값으로 휴대폰 인증 후 회원가입처리가 됩니다. (타사 API를 이용한 WEB문자 발송) 
만약 이미 방문한 고객이라면 회원임을 알린 후 영수증이 출력되게 됩니다. 만약 회원이 아닌 초객이라면 아래와 같이 인증과정을 거친 후 영수증이 출력되게 됩니다. 
<img width="748" alt="스크린샷 2021-01-04 오후 6 20 38" src="https://user-images.githubusercontent.com/45731301/103519873-9e7f6f00-4eb9-11eb-98af-f2405f79d2e0.png">
<img width="596" alt="스크린샷 2021-01-04 오후 6 22 21" src="https://user-images.githubusercontent.com/45731301/103520266-3c733980-4eba-11eb-900a-e6dd15c09158.png">

<br/>  

### 보완 사항 및 개발 후기
프로젝트를 개발을 시작했을 때 DB설계를 마치고 나서 Winform개발을 시작했습니다. 
C# 코딩을 하면서 DB설계의 부족함을 많이 느끼게 되어 DB의 설계를 바꾸게 되면 작성 했던 코드를 많이 지우고 새로 작성하게 되었습니다. 그나마 다행이었던 점은 DB의 Connection과 CRUD의 기능을 사용자정의 클래스로 따로 작성하였기에 DB가 수정되어도 모든 코드를 새로 작성하지 않고 일부는 재사용이 가능했습니다. 
그리고 폼과 폼끼리 데이터를 주고 받을 때 어떤 방식으로 주고받아야 할지 어떤게 통상적으로 사용하는 방법을 잘 숙지하지 못했기에 코드를 작성하면서도 긴가민가한 기분으로 작성했습니다. 
다음에 포트폴리오를 목적으로 프로젝트를 한다면 디자인 패턴(MVC, MVVM 등.)을 사용하여 프로그램을 만들어보고 싶습니다. 
이번 프로젝트에서는 디자인 패턴 없이 코드 작성자인 제가 임의로 정하고 디자인 패턴은 없이 프로그램을 작성하여 그 부분이 많이 아쉽습니다. 
프로젝트 보완 사항은 영수증 출력기를 제어할 때 해당 하드웨어 회사에서 제공하는 C# API로 프린터 제어가 가능했습니다.
그 코드를 이 프로젝트에 흡수시키는 것이 많이 힘들었습니다. 또한 완벽히 제어한 것이 아닙니다. 
고객의 결제가 끝난 뒤 휴대폰 번호로 2진 바코드를 만들어서 고객 영수증에 출력 시켜준 뒤 아두이노나 바코드 스캐너를 이용해 
현재 이 고객이 스터디카페를 이용중인지 아닌지 검증 후 잠겨 있는 문을 열어주는게 목표였으나, 저의 부족함으로 그 부분은 구현하지 못했습니다.

<br/>  

